# Лабораторная 3: Генерация графов, похожих на реальные сети

## Цель

Построить графы по 100 случайным точкам на плоскости 100×100: рёбра добавляются по вероятностям, зависящим от расстояния между точками. Циклы недопустимы; выбор вершины, от которой строится ребро, разыгрывается с пересчётом вероятностей (по степеням вершин). Поэкспериментировать с параметрами и ограничениями достаточно, чтобы показать закономерности и сделать выводы.

## Условие

- **Точки:** 100 штук в квадрате [0, 100]×[0, 100].
- **Вероятности ребра** между вершинами i и j (d_ij — евклидово расстояние):
  - **Формула 1:** P_ij = e^(-a·d_ij²)
  - **Формула 2:** P_ij = 1 / (d_ij^b)
- **Ограничение:** граф без циклов (лес/дерево); используется СНМ (union–find).
- **Динамика:** вершина i выбирается с вероятностью пропорциональной (degree_i + 1); вершина j — с вероятностью пропорциональной P_ij среди вершин из других компонент связности.

## Запуск

```bash
cd lab-3
pip install -r requirements.txt   # numpy, matplotlib
python3 lab-3.py
```

Для массовой серии (например, по 500 графов на каждую комбинацию формула–параметр) для поиска закономерностей:

```bash
python3 lab-3.py --batch 500
```

Для отчёта и наглядных закономерностей рекомендуется запуск с `--batch 100` или `--batch 500`, чтобы в блоке «Выводы по серии» были устойчивые средние и разброс.

Скрипт:

1. Генерирует серию графов: несколько значений a (формула 1) и b (формула 2). По умолчанию — по одному графу на каждую комбинацию; с `--batch N` — по N графов на каждую комбинацию (разные seed).
2. Сохраняет метрики каждого графа в **graphs/metrics.csv** (formula, param, seed, avg_edge_len, max_deg, n_edges).
3. Рисунки графов сохраняет в **images/** (по одному изображению на каждую комбинацию формула–параметр).
4. После генерации анализирует папку: читает CSV, строит графики закономерностей (средняя длина ребра и макс. степень от параметра, при N > 1 — с разбросом), дописывает блок «Выводы по серии» в **analysis.md**.
5. Пишет в **analysis.md** сравнение конфигураций и раздел «Выводы».

## Файлы

| Файл | Назначение |
|------|------------|
| `lab-3.py` | Генерация, сохранение метрик в graphs/, визуализация, пост-анализ по CSV |
| `requirements.txt` | numpy, matplotlib |
| `images/*.png` | Рисунки графов и графики зависимостей (в т.ч. batch_avg_edge_len.png, batch_max_degree.png) |
| `images/interesting/` | 8 выбранных графов, наглядно показывающих закономерность (от длинных рёбер и хабов к коротким и локальным) |
| `graphs/metrics.csv` | Метрики по каждому сгенерированному графу |
| `analysis.md` | Анализ, сравнение, выводы и (при batch) выводы по серии |

## Параметры

- **Формула 1 (exp):** a ∈ {0.01, 0.03, 0.06, 0.10, 0.15, 0.25, 0.4} — чем больше a, тем сильнее предпочтение коротких рёбер.
- **Формула 2 (степень):** b ∈ {0.3, 0.6, 0.9, 1.2, 1.6, 2.0, 2.5} — чем больше b, тем сильнее зависимость от расстояния.

Число рёбер в каждом графе: 99 (дерево на 100 вершинах).
