# Лабораторная работа 2. Метод критического пути (CPM)

## Что это за лаба?

**Лаба 2** — это расчёт **сетевого графика** по **методу критического пути (CPM)**. По графу работ (узлы — события, рёбра — работы с длительностями \(t\)) считаются ранние/поздние сроки, резервы и критический путь.

**Обозначения:** длительность работы \(t\), раннее начало **РН**, раннее окончание **РО**, позднее начало **ПН**, позднее окончание **ПО**, полный резерв \(R\), частный резерв \(r\).

**Правильность вывода:** да, вывод программы корректен; критический путь 1→2→3→5→6, \(T_{\text{кр}}=16\).

---

## Решение в тетради по шагам

### Исходные данные (вариант 17)

Граф работ: события \(i = 1, 2, \ldots, 6\); работы \((i \to j)\) с длительностью \(t_{ij}\).

| Работа | Начало \(i\) | Конец \(j\) | Длительность \(t_{ij}\) |
|:-------|:------------:|:-----------:|:-----------------------:|
| A      | 1            | 2           | 0                       |
| B      | 2            | 3           | 5                       |
| C      | 2            | 4           | 3                       |
| D      | 3            | 5           | 6                       |
| E      | 4            | 5           | 4                       |
| F      | 5            | 6           | 5                       |

**Схема графа (выровнена):**

```
     A(0)      B(5)      D(6)
  ① ──────► ② ──────► ③ ──┐
           │                │
           │ C(3)      E(4) │    F(5)
           └────────► ④ ────┴──► ⑤ ──────► ⑥
```

---

### Шаг 1. Прямой ход — ранние сроки событий \(\boldsymbol{РС_i}\)

**Формула:** для стартового события \(РС_1 = 0\); для остальных:

\[
РС_j = \max_{i \in \Gamma^{-}(j)} \bigl( РС_i + t_{ij} \bigr),
\]

где \(\Gamma^{-}(j)\) — множество событий, из которых идут работы в событие \(j\).

**Примеры расчёта:**

- Событие 1: нет входящих → \(РС_1 = 0\).
- Событие 2: одна работа (1→2), \(t_{12}=0\) → \(РС_2 = РС_1 + t_{12} = 0 + 0 = 0\).
- Событие 3: работа (2→3), \(t_{23}=5\) → \(РС_3 = РС_2 + t_{23} = 0 + 5 = 5\).
- Событие 4: работа (2→4), \(t_{24}=3\) → \(РС_4 = РС_2 + t_{24} = 0 + 3 = 3\).
- Событие 5: две работы (3→5) и (4→5):
  \[
  РС_5 = \max(РС_3 + t_{35},\; РС_4 + t_{45}) = \max(5+6,\; 3+4) = \max(11,\, 7) = 11.
  \]
- Событие 6: работа (5→6), \(t_{56}=5\) → \(РС_6 = РС_5 + t_{56} = 11 + 5 = 16\).

**Критическое время проекта:**

\[
T_{\text{кр}} = РС_6 = 16.
\]

---

### Шаг 2. Обратный ход — поздние сроки событий \(\boldsymbol{ПС_i}\)

**Формула:** для конечного события \(ПС_n = T_{\text{кр}}\); для остальных:

\[
ПС_i = \min_{j \in \Gamma^{+}(i)} \bigl( ПС_j - t_{ij} \bigr),
\]

где \(\Gamma^{+}(i)\) — множество событий, в которые идут работы из события \(i\).

**Примеры расчёта:**

- Событие 6: \(ПС_6 = T_{\text{кр}} = 16\).
- Событие 5: работа (5→6) → \(ПС_5 = ПС_6 - t_{56} = 16 - 5 = 11\).
- Событие 4: работа (4→5) → \(ПС_4 = ПС_5 - t_{45} = 11 - 4 = 7\).
- Событие 3: работа (3→5) → \(ПС_3 = ПС_5 - t_{35} = 11 - 6 = 5\).
- Событие 2: две работы (2→3) и (2→4):
  \[
  ПС_2 = \min(ПС_3 - t_{23},\; ПС_4 - t_{24}) = \min(5-5,\; 7-3) = \min(0,\, 4) = 0.
  \]
- Событие 1: работа (1→2) → \(ПС_1 = ПС_2 - t_{12} = 0 - 0 = 0\).

---

### Шаг 3. Раннее и позднее начало/окончание работ

Для работы \((i \to j)\) с длительностью \(t_{ij}\):

\[
\text{РН} = РС_i, \qquad \text{РО} = \text{РН} + t_{ij} = РС_i + t_{ij},
\]
\[
\text{ПО} = ПС_j, \qquad \text{ПН} = \text{ПО} - t_{ij} = ПС_j - t_{ij}.
\]

| Работа   | \(t_{ij}\) | РН = \(РС_i\) | РО = РН + \(t\) | ПО = \(ПС_j\) | ПН = ПО − \(t\) |
|:---------|:----------:|:-------------:|:---------------:|:-------------:|:---------------:|
| A(1–2)   | 0          | 0             | 0               | 0             | 0               |
| B(2–3)   | 5          | 0             | 5               | 5             | 0               |
| C(2–4)   | 3          | 0             | 3               | 7             | 4               |
| D(3–5)   | 6          | 5             | 11              | 11            | 5               |
| E(4–5)   | 4          | 3             | 7               | 11            | 7               |
| F(5–6)   | 5          | 11            | 16              | 16            | 11              |

---

### Шаг 4. Резервы времени

**Полный резерв** (на сколько можно сдвинуть работу, не увеличивая срок проекта):

\[
R = \text{ПО} - \text{РО} = \text{ПН} - \text{РН}.
\]

**Частный резерв** (на сколько можно сдвинуть окончание, не меняя ранние сроки последующих работ):

\[
r = РС_j - \text{РО}.
\]

| Работа   | \(R = \text{ПО} - \text{РО}\) | \(r = РС_j - \text{РО}\) |
|:---------|:-----------------------------:|:------------------------:|
| A(1–2)   | 0 − 0 = 0                     | 0 − 0 = 0                |
| B(2–3)   | 5 − 5 = 0                     | 5 − 5 = 0                |
| C(2–4)   | 7 − 3 = 4                     | 3 − 3 = 0                |
| D(3–5)   | 11 − 11 = 0                   | 11 − 11 = 0              |
| E(4–5)   | 11 − 7 = 4                    | 11 − 7 = 4               |
| F(5–6)   | 16 − 16 = 0                   | 16 − 16 = 0              |

---

### Шаг 5. Критический путь

Критические работы: **полный резерв \(R = 0\)**. Цепочка по таким работам даёт критический путь.

Работы с \(R = 0\): **A, B, D, F** → путь по узлам: **1 → 2 → 3 → 5 → 6**.

- \(T_{\text{кр}} = 16\)
- Критический путь (узлы): **1 → 2 → 3 → 5 → 6**

---

## Итоговая таблица (как в программе)

| Работа   | \(t\) | РН | РО | ПН | ПО | \(R\) (полн) | \(r\) (част) |
|:---------|:-----:|:--:|:--:|:--:|:--:|:------------:|:------------:|
| A(1–2)   | 0     | 0  | 0  | 0  | 0  | 0            | 0            |
| B(2–3)   | 5     | 0  | 5  | 0  | 5  | 0            | 0            |
| C(2–4)   | 3     | 0  | 3  | 4  | 7  | 4            | 0            |
| D(3–5)   | 6     | 5  | 11 | 5  | 11 | 0            | 0            |
| E(4–5)   | 4     | 3  | 7  | 7  | 11 | 4            | 4            |
| F(5–6)   | 5     | 11 | 16 | 11 | 16 | 0            | 0            |

**Вывод:** расчёт в тетради и вывод программы `python3 lab-2.py` совпадают.
