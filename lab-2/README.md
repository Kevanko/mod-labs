# Лабораторная работа 2. Метод критического пути (CPM)

## Что это за лаба?

**Лаба 2** — расчёт **сетевого графика** по **методу критического пути (CPM)**. По графу работ (узлы — события, рёбра — работы с длительностями) считаются ранние и поздние сроки, резервы и критический путь.

**Обозначения:**
- **t** — длительность работы
- **РН** — раннее начало, **РО** — раннее окончание
- **ПН** — позднее начало, **ПО** — позднее окончание
- **R** — полный резерв, **r** — частный резерв
- **РС(i)** — ранний срок события i, **ПС(j)** — поздний срок события j

**Правильность вывода:** вывод программы корректен; критический путь 1→2→3→5→6, критическое время Tкр = 16.

---

## Решение в тетради по шагам

### Исходные данные (вариант 17)

Граф работ: события от 1 до 6; каждая работа идёт из события i в событие j и имеет длительность t(i,j).

| Работа | Начало i | Конец j | Длительность t |
|:-------|:--------:|:-------:|:--------------:|
| A      | 1        | 2       | 0              |
| B      | 2        | 3       | 5              |
| C      | 2        | 4       | 3              |
| D      | 3        | 5       | 6              |
| E      | 4        | 5       | 4              |
| F      | 5        | 6       | 5              |

**Схема графа:**

```
     A(0)      B(5)      D(6)
  ① ──────► ② ──────► ③ ──┐
           │                │
           │ C(3)      E(4) │    F(5)
           └────────► ④ ────┴──► ⑤ ──────► ⑥
```

---

### Шаг 1. Прямой ход — ранние сроки событий РС(i)

**Правило:**
- Ранний срок начального события: **РС(1) = 0**.
- Для любого другого события j берём **все работы, которые в него входят** (из какого-то события i в j). Для каждой такой работы считаем: РС(i) + t(i,j). Ранний срок события j — это **максимум** из этих чисел.

**Словами:** РС(j) = max по всем предшественникам i от ( РС(i) + t(i,j) ).

**Примеры:**

- Событие 1: входящих работ нет → **РС(1) = 0**.
- Событие 2: одна работа (1→2), t=0 → РС(2) = РС(1) + 0 = **0**.
- Событие 3: работа (2→3), t=5 → РС(3) = РС(2) + 5 = **5**.
- Событие 4: работа (2→4), t=3 → РС(4) = РС(2) + 3 = **3**.
- Событие 5: входят две работы — (3→5) и (4→5). Считаем:
  - от 3: РС(3) + 6 = 5 + 6 = 11  
  - от 4: РС(4) + 4 = 3 + 4 = 7  
  - берём максимум → **РС(5) = 11**.
- Событие 6: работа (5→6), t=5 → РС(6) = РС(5) + 5 = **16**.

**Критическое время проекта:** Tкр = РС(6) = **16**.

---

### Шаг 2. Обратный ход — поздние сроки событий ПС(i)

**Правило:**
- Поздний срок конечного события: **ПС(6) = Tкр = 16**.
- Для любого другого события i берём **все работы, которые из него выходят** (из i в какое-то j). Для каждой такой работы считаем: ПС(j) − t(i,j). Поздний срок события i — это **минимум** из этих чисел.

**Словами:** ПС(i) = min по всем следующим j от ( ПС(j) − t(i,j) ).

**Примеры:**

- Событие 6: **ПС(6) = 16**.
- Событие 5: работа (5→6) → ПС(5) = ПС(6) − 5 = **11**.
- Событие 4: работа (4→5) → ПС(4) = ПС(5) − 4 = **7**.
- Событие 3: работа (3→5) → ПС(3) = ПС(5) − 6 = **5**.
- Событие 2: выходят две работы — (2→3) и (2→4). Считаем:
  - в 3: ПС(3) − 5 = 5 − 5 = 0  
  - в 4: ПС(4) − 3 = 7 − 3 = 4  
  - берём минимум → **ПС(2) = 0**.
- Событие 1: работа (1→2) → ПС(1) = ПС(2) − 0 = **0**.

---

### Шаг 3. Раннее и позднее начало/окончание работ

Для каждой работы (из i в j) с длительностью t:

- **РН** = РС(i) — раннее начало равно раннему сроку начала события.
- **РО** = РН + t — раннее окончание.
- **ПО** = ПС(j) — позднее окончание равно позднему сроку конечного события.
- **ПН** = ПО − t — позднее начало.

| Работа   | t  | РН = РС(i) | РО = РН+t | ПО = ПС(j) | ПН = ПО−t |
|:---------|:--:|:----------:|:---------:|:----------:|:---------:|
| A(1–2)   | 0  | 0          | 0         | 0          | 0         |
| B(2–3)   | 5  | 0          | 5         | 5          | 0         |
| C(2–4)   | 3  | 0          | 3         | 7          | 4         |
| D(3–5)   | 6  | 5          | 11        | 11         | 5         |
| E(4–5)   | 4  | 3          | 7         | 11         | 7         |
| F(5–6)   | 5  | 11         | 16        | 16         | 11        |

---

### Шаг 4. Резервы времени

**Полный резерв R** — на сколько можно сдвинуть работу, не увеличивая срок проекта:

- **R = ПО − РО** (или то же: R = ПН − РН).

**Частный резерв r** — на сколько можно сдвинуть окончание работы, не сдвигая ранние сроки следующих работ:

- **r = РС(j) − РО**, где j — конечное событие этой работы.

| Работа   | R = ПО − РО   | r = РС(j) − РО |
|:---------|:-------------:|:--------------:|
| A(1–2)   | 0 − 0 = 0     | 0 − 0 = 0      |
| B(2–3)   | 5 − 5 = 0     | 5 − 5 = 0      |
| C(2–4)   | 7 − 3 = 4     | 3 − 3 = 0      |
| D(3–5)   | 11 − 11 = 0   | 11 − 11 = 0    |
| E(4–5)   | 11 − 7 = 4    | 11 − 7 = 4     |
| F(5–6)   | 16 − 16 = 0   | 16 − 16 = 0    |

---

### Шаг 5. Критический путь

Критические работы — те, у которых **полный резерв R = 0**. Цепочка таких работ по узлам и есть критический путь.

Работы с R = 0: **A, B, D, F** → путь по узлам: **1 → 2 → 3 → 5 → 6**.

- Критическое время: **Tкр = 16**.
- Критический путь (узлы): **1 → 2 → 3 → 5 → 6**.

---

## Итоговая таблица (как в программе)

| Работа   | t  | РН | РО | ПН | ПО | R (полн) | r (част) |
|:---------|:--:|:--:|:--:|:--:|:--:|:--------:|:--------:|
| A(1–2)   | 0  | 0  | 0  | 0  | 0  | 0        | 0        |
| B(2–3)   | 5  | 0  | 5  | 0  | 5  | 0        | 0        |
| C(2–4)   | 3  | 0  | 3  | 4  | 7  | 4        | 0        |
| D(3–5)   | 6  | 5  | 11 | 5  | 11 | 0        | 0        |
| E(4–5)   | 4  | 3  | 7  | 7  | 11 | 4        | 4        |
| F(5–6)   | 5  | 11 | 16 | 11 | 16 | 0        | 0        |

**Вывод:** расчёт в тетради и вывод программы `python3 lab-2.py` совпадают.
