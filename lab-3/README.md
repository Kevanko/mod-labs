# Лабораторная 3: Генерация графов, похожих на реальные сети

## Цель

Построить графы по 100 случайным точкам на плоскости 100×100: рёбра добавляются по вероятностям, зависящим от расстояния между точками. Циклы недопустимы; выбор вершины, от которой строится ребро, разыгрывается с пересчётом вероятностей (по степеням вершин). Поэкспериментировать с параметрами и ограничениями достаточно, чтобы показать закономерности и сделать выводы.

## Условие

- **Точки:** 100 штук в квадрате [0, 100]×[0, 100].
- **Вероятности ребра** между вершинами i и j (d_ij — евклидово расстояние):
  - **Формула 1:** P_ij = e^(-a·d_ij²)
  - **Формула 2:** P_ij = 1 / (d_ij^b)
- **Ограничение:** граф без циклов (лес/дерево); используется СНМ (union–find).
- **Динамика:** вершина i выбирается с вероятностью пропорциональной (degree_i + 1); вершина j — с вероятностью пропорциональной P_ij среди вершин из других компонент связности.

## Запуск

```bash
cd lab-3
pip install -r requirements.txt   # numpy, matplotlib
python3 lab-3.py
```

Чтобы сгенерировать **по 25–50 графов на каждую формулу** и выбрать из них 8 самых интересных в отчёт:

```bash
python3 lab-3.py --batch 4   # 28 графов на формулу (7 параметров × 4 seed)
python3 lab-3.py --batch 7   # 49 графов на формулу
```

Метрики по формуле exp сохраняются в **graphs/exp/metrics.csv**, по формуле 1/d^b — в **graphs/pow/metrics.csv**. Из каждого пула по медианной средней длине ребра выбираются по 4 графа (всего 8), пересобираются и сохраняются в **images/interesting/**.

Для больших серий (устойчивые средние в выводе по серии):

```bash
python3 lab-3.py --batch 100
```

Скрипт:

1. Генерирует графы: 7 значений a (формула 1) и 7 значений b (формула 2). По умолчанию — по одному на комбинацию; с `--batch N` — по N на комбинацию (разные seed). Итого до 7×N графов на формулу.
2. Сохраняет метрики в **graphs/metrics.csv**, а также в **graphs/exp/metrics.csv** и **graphs/pow/metrics.csv** (отдельные папки по формулам).
3. Рисунки в **images/** (по одному на комбинацию при первом seed). При N ≥ 4 из пула exp/pow выбираются 8 «интересных» (медианные по параметрам) и сохраняются в **images/interesting/**.
4. Анализ: графики закономерностей, блок «Выводы по серии» и творческая часть дописываются в **analysis.md**.

## Файлы

| Файл | Назначение |
|------|------------|
| `lab-3.py` | Генерация, сохранение метрик в graphs/, визуализация, пост-анализ по CSV |
| `requirements.txt` | numpy, matplotlib |
| `images/*.png` | Рисунки графов и графики зависимостей (в т.ч. batch_avg_edge_len.png, batch_max_degree.png) |
| `images/interesting/` | 8 выбранных графов, наглядно показывающих закономерность (от длинных рёбер и хабов к коротким и локальным) |
| `graphs/metrics.csv` | Метрики по всем графам |
| `graphs/exp/metrics.csv` | Метрики по графам формулы exp(-a·d²) |
| `graphs/pow/metrics.csv` | Метрики по графам формулы 1/d^b |
| `analysis.md` | Анализ, сравнение, выводы и (при batch) выводы по серии |

## Параметры

- **Формула 1 (exp):** a ∈ {0.01, 0.03, 0.06, 0.10, 0.15, 0.25, 0.4} — чем больше a, тем сильнее предпочтение коротких рёбер.
- **Формула 2 (степень):** b ∈ {0.3, 0.6, 0.9, 1.2, 1.6, 2.0, 2.5} — чем больше b, тем сильнее зависимость от расстояния.

Число рёбер в каждом графе: 99 (дерево на 100 вершинах).
